<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Succw Blog :)</title>
  <meta name="author" content="獨菰、瑉">
  
  <meta name="description" content="运成功者的谦词，命失败者的借口">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Succw Blog :)"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">

  <link rel="alternate" href="/atom.xml" title="Succw Blog :)" type="application/atom+xml">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/print.css" media="print" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

  <script src="/js/scripts.js"></script>

  
  
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config(
    {
      tex2jax: {inlineMath: [['$','$'], ['\(','\)']]},
      TeX: {equationNumbers: {autoNumber: ["AMS"], useLabelIds: true}},
    }
  );
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
</head>


<body>
    <div class="container">
      <div class="left-col">
        <div class="intrude-less">
          <header id="header" class="inner">
            <div class="profilepic">
  <script src="/js/md5.js"></script>
  <script type="text/javascript">
    $(function(){
	$('.profilepic').append(
          "<img src='http://www.gravatar.com/avatar/"
          + MD5("tivon.su@gmail.com")
          + "?s=160' alt='Profile Picture' style='width: 160px;' />");
    });
  </script>
</div><!-- profilepic -->
<h1><a href="/">獨菰、瑉</a></h1>
<nav id="main-nav">
  <ul class="main">
    
      <li>
      <a href="/about">About</a>
      </li>
    
  </ul>
  
  <section class="aboutme">
    <p>
      运成功者的谦词，命失败者的借口
    </p>
  </section>
  
</nav><!-- main-nav -->
<nav id="sub-nav">
  <div class="social">
    
      <a class="google" href="http://plus.google.com/"
         title="Google+">Google+</a>
    
    
      <a class="twitter" href="http://twitter.com/"
         title="Twitter">Twitter</a>
    
    
      <a class="github" href="http://github.com/"
         title="Github">Github</a>
    
    
        <a class="rss" href="/atom.xml" title="RSS">RSS</a>
    
  </div>
</nav><!-- sub-nav -->
<nav id="widget-nav">
  <div class="widgets">
    
      
<div class="widget tag">
  <h3 class="title">標籤</h3>
  <ul class="entry">
  
    <li><a href="/tags/Linux/">Linux</a><small>8</small></li>
  
    <li><a href="/tags/VMware/">VMware</a><small>9</small></li>
  
    <li><a href="/tags/Windows/">Windows</a><small>2</small></li>
  
    <li><a href="/tags/svn/">svn</a><small>1</small></li>
  
    <li><a href="/tags/音乐/">音乐</a><small>2</small></li>
  
  </ul>
</div>


    
  </div>
</nav><!-- widget-nav -->

          <header>
        </div><!-- intrude-less -->
      </div><!-- left-col -->
      <div class="mid-col">
        <div class="mid-col-container">
	    <div id="content" class="inner"><div itemscope itemtype="http://schema.org/Blog">

  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<div class="meta">
          
<div class="date">

<time datetime="2014-01-26T11:18:19.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  1月 26 2014
</time>





</div>

          

 
 <div class="tags">
   <a href="/tags/svn/">svn</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/svn/" itemprop="url">
            svn</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <h5 id="ubuntu-subversion-">ubuntu下安装subversion客户端:</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>sudo apt<span class="attribute">-get</span> install subversion subversion<span class="attribute">-tools</span>
</pre></td></tr></table></figure>

<p>详细请看<a href="http://www.subversion.org.cn/svnbook/1.1/index.html" target="_blank"> <a href="http://www.subversion.org.cn/svnbook/1.1/index.html">http://www.subversion.org.cn/svnbook/1.1/index.html</a></a> svn子命令</p>
<p>1、<strong>检出</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">svn</span>  <span class="comment">co</span>  <span class="comment">http://路径(目录或文件的全路径)　</span><span class="title">[</span><span class="comment">本地目录全路径</span><span class="title">]</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">username</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">password</span> <span class="comment">密码</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">svn</span>  <span class="comment">co</span>  <span class="comment">svn://路径(目录或文件的全路径)　</span><span class="title">[</span><span class="comment">本地目录全路径</span><span class="title">]</span>  <span class="literal">-</span><span class="literal">-</span><span class="comment">username</span> <span class="comment">用户名</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">password</span> <span class="comment">密码</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn  checkout  <span class="keyword">http</span>://路径(目录或文件的全路径)　[本地目录全路径] <span class="comment">--username　用户名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn  checkout  svn:<span class="comment">//路径(目录或文件的全路径)　[本地目录全路径]  --username　用户名</span>
</pre></td></tr></table></figure>

<p><em>注：如果不带--password 参数传输密码的话，会提示输入密码，建议不要用明文的--password 选项
。其中 username 与 password前是两个短线，不是一个。不指定本地目录全路径，则检出到当前目
录下</em>。</p>
<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>svn co svn://<span class="number">192.168</span><span class="number">.0</span><span class="number">.3</span>/测试工具 /home/testtools <span class="comment">--username wzhnsc</span>

svn co <span class="keyword">http</span>://<span class="number">192.168</span><span class="number">.0</span><span class="number">.3</span>/test/testapp <span class="comment">--username wzhnsc</span>

svn checkout svn://<span class="number">192.168</span><span class="number">.0</span><span class="number">.3</span>/测试工具 /home/testtools <span class="comment">--username wzhnsc</span>

svn checkouthttp://<span class="number">192.168</span><span class="number">.0</span><span class="number">.3</span>/test/testapp <span class="comment">--username wzhnsc</span>
</pre></td></tr></table></figure>

<p><strong>2、导出(导出一个干净的不带.svn文件夹的目录树)</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn  <span class="keyword">export</span>  [-r 版本号]  http:<span class="comment">//路径(目录或文件的全路径) [本地目录全路径]　--username　用户名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn  <span class="keyword">export</span>  [-r 版本号]  svn:<span class="comment">//路径(目录或文件的全路径) [本地目录全路径]　--username　用户名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn  <span class="keyword">export</span>  本地检出的(即带有.svn文件夹的)目录全路径  要导出的本地目录全路径
</pre></td></tr></table></figure>

<p>*注：第一种从版本库导出干净工作目录树的形式是指定URL，如果指定了修订版本号，会导出相应的</p>
<p>版本，如果没有指定修订版本，则会导出最新的，导出到指定位置。如果省略 本地目录全路径，URL</p>
<p>的最后一部分会作为本地目录的名字。第二种形式是指定 本地检出的目录全路径 到 要导出的本地目</p>
<p>录全路径，所有的本地修改将会保留，但是不在版本控制下(即没提交的新文件，因为.svn文件夹里没</p>
<p>有与之相关的信息记录)的文件不会拷贝。*</p>
<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>svn exportsvn:<span class="comment">//192.168.0.3/测试工具 /home/testtools --username wzhnsc</span>
svn exporthttp:<span class="comment">//192.168.0.3/test/testapp --username wzhnsc</span>
svn <span class="keyword">export</span>/home/testapp /home/testtools
</pre></td></tr></table></figure>

<p>3、<strong>添加新文件 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　<span class="built_in">add</span>　文件名
</pre></td></tr></table></figure>

<p><em>注：告诉SVN服务器要添加文件了，还要用svn commint -m真实的上传上去！
例子：</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>svn <span class="keyword">add</span> test<span class="preprocessor">.php</span> ＜－ 添加test<span class="preprocessor">.php</span> 
svn commit -m “添加我的测试用test<span class="preprocessor">.php</span>“ test<span class="preprocessor">.php</span>
svn <span class="keyword">add</span> *<span class="preprocessor">.php</span> ＜－ 添加当前目录下所有的php文件
svn commit -m “添加我的测试用全部php文件“ *<span class="preprocessor">.php</span>
</pre></td></tr></table></figure>

<p><strong>4、提交</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　commit　<span class="attribute">-m</span>　“提交备注信息文本“　<span class="preprocessor">[</span><span class="attribute">-N</span><span class="preprocessor">]</span><span class="markup">　</span><span class="preprocessor">[</span><span class="subst">--</span>no<span class="attribute">-unlock</span><span class="preprocessor">]</span><span class="markup">　文件名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　ci　<span class="attribute">-m</span>　“提交备注信息文本“　<span class="preprocessor">[</span><span class="attribute">-N</span><span class="preprocessor">]</span><span class="markup">　</span><span class="preprocessor">[</span><span class="subst">--</span>no<span class="attribute">-unlock</span><span class="preprocessor">]</span><span class="markup">　文件名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>必须带上<span class="attribute">-m</span>参数，参数可以为空，但是必须写上<span class="attribute">-m</span>
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre>svn commit <span class="attribute">-m</span> “提交当前目录下的全部在版本控制下的文件“ <span class="subst">*</span> ＜－ 注意这个<span class="subst">*</span>表示全部文件

svn commit <span class="attribute">-m</span> “提交我的测试用test<span class="built_in">.</span>php“ test<span class="built_in">.</span>php

svn commit <span class="attribute">-m</span> “提交我的测试用test<span class="built_in">.</span>php“ <span class="attribute">-N</span> <span class="subst">--</span>no<span class="attribute">-unlock</span> test<span class="built_in">.</span>php ＜－ 保持锁就用–no<span class="attribute">-unlock</span>开关

svn ci <span class="attribute">-m</span> “提交当前目录下的全部在版本控制下的文件“ <span class="subst">*</span> ＜－ 注意这个<span class="subst">*</span>表示全部文件

svn ci <span class="attribute">-m</span> “提交我的测试用test<span class="built_in">.</span>php“ test<span class="built_in">.</span>php

svn ci <span class="attribute">-m</span> “提交我的测试用test<span class="built_in">.</span>php“ <span class="attribute">-N</span> <span class="subst">--</span>no<span class="attribute">-unlock</span> test<span class="built_in">.</span>php ＜－ 保持锁就用–no<span class="attribute">-unlock</span>开关
</pre></td></tr></table></figure>

<p><strong>5、更新文件</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>svn　<span class="operator"><span class="keyword">update</span>
svn　<span class="keyword">update</span>　-r　修正版本　文件名
svn　<span class="keyword">update</span>　文件名</span>
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>svn <span class="operator"><span class="keyword">update</span> ＜－ 后面没有目录，默认将当前目录以及子目录下的所有文件都更新到最新版本

svn <span class="keyword">update</span> -r <span class="number">200</span> test.cpp ＜－ 将版本库中的文件 test.cpp 还原到修正版本（revision）<span class="number">200</span>

svn <span class="keyword">update</span> test.php ＜－ 更新与版本库同步。</span>
</pre></td></tr></table></figure>

<p><em>
提交的时候提示过期冲突，需要先 update 修改文件，</em>
然后清除svn resolved，最后再提交commit。</p>
<p><strong>6、删除文件</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　<span class="keyword">delete</span>　svn:<span class="comment">//路径(目录或文件的全路径) -m “删除备注信息文本”</span>
</pre></td></tr></table></figure>

<p>推荐如下操作：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　<span class="keyword">delete</span>　文件名 
svn　ci　-m　“删除备注信息文本”
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>svn delete svn://<span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>/testapp/test<span class="preprocessor">.php</span> -m “删除测试文件test<span class="preprocessor">.php</span>”

推荐如下操作：

svn delete test<span class="preprocessor">.php</span> 

svn ci -m “删除测试文件test<span class="preprocessor">.php</span>”
</pre></td></tr></table></figure>

<p><strong>７、加锁/解锁 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　<span class="keyword">lock</span>　-m　“加锁备注信息文本“　[--force]　文件名 
svn　unlock　文件名
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn lock -m “锁信测试用test<span class="preprocessor">.php</span>文件“ test<span class="preprocessor">.php</span> 
svn unlock test<span class="preprocessor">.php</span>
</pre></td></tr></table></figure>

<p><strong>8、比较差异 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　diff　文件名 
svn　diff　<span class="attribute">-r</span>　修正版本号m:修正版本号n　文件名
</pre></td></tr></table></figure>

<p>例子：
svn diff test.php＜－ 将修改的文件与基础版本比较
svn diff -r 200:201 test.php＜－ 对 修正版本号200 和 修正版本号201 比较差异</p>
<p><strong>9、查看文件或者目录状态</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn <span class="keyword">st</span> 目录路径/名
svn status 目录路径/名＜－ 目录下的文件和子目录的状态，正常状态不显示
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn  <span class="attribute">-v</span> 目录路径<span class="subst">/</span>名
svn status <span class="attribute">-v</span> 目录路径<span class="subst">/</span>名＜－ 显示文件和子目录状态
</pre></td></tr></table></figure>

<p>　　　　　　　　　　　　　　</p>
<p><em>
注：svn status、svn diff和 svn revert这三条命令在没有网络的情况下也可以执行的，原因是svn在本地的.svn中保留了本地版本的原始拷贝
</em></p>
<p><strong>10、查看日志</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　<span class="keyword">log</span>　文件名
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn <span class="keyword">log</span> test.php＜－ 显示这个文件的所有修改记录，及其版本号的变化
</pre></td></tr></table></figure>

<p><strong>11、查看文件详细信息</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">svn</span>　<span class="built_in">info</span>　文件名
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>例子：

svn info test<span class="preprocessor">.php</span>
</pre></td></tr></table></figure>

<p><strong>12、SVN 帮助</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　<span class="built_in">help</span> ＜－ 全部功能选项
svn　<span class="built_in">help</span>　ci ＜－ 具体功能的说明
</pre></td></tr></table></figure>

<p><strong>13、查看版本库下的文件和目录列表 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　<span class="keyword">list</span>　svn:<span class="comment">//路径(目录或文件的全路径)</span>
svn　ls　svn:<span class="comment">//路径(目录或文件的全路径)</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>例子：

svn list <span class="symbol">svn:</span>/<span class="regexp">/192.168.0.3/test</span>

svn ls <span class="symbol">svn:</span>/<span class="regexp">/192.168.0.3/test</span> ＜－ 显示<span class="symbol">svn:</span>/<span class="regexp">/192.168.0.3/test</span>目录下的所有属于版本库的文件和目录
</pre></td></tr></table></figure>

<p><strong>14、创建纳入版本控制下的新目录</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>svn　<span class="keyword">mkdir</span>　目录名
svn　<span class="keyword">mkdir</span>　-<span class="keyword">m</span>　<span class="string">"新增目录备注文本"</span>　http:<span class="regexp">//</span>目录全路径
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>例子：
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn <span class="keyword">mkdir</span> newdir
</pre></td></tr></table></figure>

<p><a href="http://http://192.168.0.3/test/newdir" target="_blank">http://http://192.168.0.3/test/newdir</a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>注：添加完子目录后，一定要回到根目录更新一下，不然在该目录下提交文件会提示“提交失败”

svn <span class="operator"><span class="keyword">update</span></span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre>注：如果手工在checkout出来的目录里创建了一个新文件夹newsubdir，再用svn mkdir newsubdir命
令后

，SVN会提示：

svn: 尝试用 “svn <span class="built_in">add</span>”或 “svn <span class="built_in">add</span> <span class="comment">--non-recursive”代替？</span>

svn: 无法创建目录“hello”: 文件已经存在此时，用如下命令解决：

svn <span class="built_in">add</span> <span class="comment">--non-recursive newsubdir</span>

在进入这个newsubdir文件夹，用ls -<span class="operator">a</span>查看它下面的全部目录与文件，会发现多了：.svn目录再用 svn

mkdir -m <span class="string">"添hello功能模块文件"</span> svn://<span class="number">192.168</span><span class="number">.0</span><span class="number">.3</span>/test/newdir/newsubdir 命令，

SVN提示：

svn: File already exists: filesystem <span class="string">'/data/svnroot/test/db'</span>, transaction <span class="string">'4541-1'</span>,path <span class="string">'/newdir/newsubdir '</span>
</pre></td></tr></table></figure>

<p><strong>15、恢复本地修改 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">svn　revert　</span><span class="title">[</span><span class="literal">-</span><span class="literal">-</span><span class="comment">recursive</span><span class="title">]</span><span class="comment">　文件名</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
<span class="comment">注意:</span> <span class="comment">本子命令不会存取网络，并且会解除冲突的状况。但是它不会恢复被删除的目录。</span>

<span class="comment">例子：</span>

<span class="comment">svn</span> <span class="comment">revert</span> <span class="comment">foo</span><span class="string">.</span><span class="comment">c</span> <span class="comment">＜－</span> <span class="comment">丢弃对一个文件的修改</span>
<span class="comment">svn</span> <span class="comment">revert</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">recursive</span> <span class="string">.</span> <span class="comment">＜－恢复一整个目录的文件，</span><span class="string">.</span> <span class="comment">为当前目录</span>
</pre></td></tr></table></figure>

<p><strong>16、把工作拷贝更新到别的URL </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　<span class="keyword">switch</span>　http:<span class="comment">//目录全路径　本地目录全路径</span>
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn <span class="keyword">switch</span> http:<span class="comment">//192.163.0.3/test/456 . ＜－ (原为123的分支)当前所在目录分支到192.163.0.3/test/456</span>
</pre></td></tr></table></figure>

<p><strong>17、解决冲突 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="tag">svn</span>　<span class="tag">resolved</span>　<span class="attr_selector">[本地目录全路径]</span>
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre>$ svn <span class="operator"><span class="keyword">update</span>
C foo.c
Updated <span class="keyword">to</span> revision <span class="number">31.</span></span>
</pre></td></tr></table></figure>

<p>如果你在更新时得到冲突，你的工作拷贝会产生三个新的文件：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>$ ls
foo<span class="preprocessor">.c</span>
foo<span class="preprocessor">.c</span><span class="preprocessor">.mine</span>
foo<span class="preprocessor">.c</span><span class="preprocessor">.r</span>30
foo<span class="preprocessor">.c</span><span class="preprocessor">.r</span>31
</pre></td></tr></table></figure>

<p>当你解决了foo.c的冲突，并且准备提交，运行svn resolved让你的工作拷贝知道你已经完成了所有事情。</p>
<p>你可以仅仅删除冲突的文件并且提交，但是svn resolved除了删除冲突文件，还修正了一些记录在工作拷贝管理区域的记录数据，所以我们推荐你使用这个命令。</p>
<p><strong>18、不checkout而查看输出特定文件或URL的内容 </strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn　cat　http:<span class="comment">//文件全路径</span>
</pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>svn cat http:<span class="comment">//192.168.0.3/test/readme.txt</span>
</pre></td></tr></table></figure>


          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<div class="meta">
          
<div class="date">

<time datetime="2014-01-23T11:15:18.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  1月 23 2014
</time>





</div>

          


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/shell脚本编程大全笔记/" itemprop="url">
            SHELL脚本编程大全笔记</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <h6 id="shell-">SHELL脚本编程大全笔记</h6>
<hr>
<ul>
<li>A=$[  $1 * $2 ] 直接运算。</li>
<li>total=$[ ${10} * ${11} ]</li>
</ul>
<p>各种i++</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="comment">$((i=i</span><span class="literal">+</span><span class="comment">1))</span>
<span class="comment">$((i</span><span class="literal">+</span><span class="literal">+</span><span class="comment">))</span>
<span class="comment">$</span><span class="title">[</span> <span class="comment">i</span><span class="literal">+</span><span class="literal">+</span> <span class="title">]</span>
<span class="comment">let</span> <span class="comment">"i</span><span class="literal">+</span><span class="literal">+</span><span class="comment">"</span>
<span class="comment">((i</span><span class="literal">+</span><span class="literal">+</span><span class="comment">))</span>
</pre></td></tr></table></figure>

<p><strong><strong>使用双尖括号</strong></strong></p>
<p><strong>(( expression  ))</strong></p>
<p>比如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash</span>
a=<span class="number">10</span>
<span class="keyword">if</span> (( <span class="variable">$a</span> ** <span class="number">2</span> &gt;<span class="number">90</span>  )) ;<span class="keyword">then</span>
        <span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>"</span>
        (( b = <span class="variable">$a</span> ** <span class="number">2</span> ))
        <span class="built_in">echo</span> <span class="variable">$b</span>
<span class="keyword">fi</span>
</pre></td></tr></table></figure>

<p>还有其他表达式：</p>
<h2 id="-http-localhost-8080-png-"><img src="http://localhost:8080/双括号.png" alt=""></h2>
<p><em>使用双方括号</em></p>
<p><strong>[[ expression ]]</strong></p>
<p>模式匹配，你可以自定义正则表达式。</p>
<h6 id="for-c-">for循环语句 { 类C语言 }</h6>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">for</span>((<span class="operator">a</span>=<span class="number">1</span>;<span class="operator">a</span>&lt;<span class="number">5</span>;<span class="operator">a</span>++)){
	echo <span class="string">"$a"</span>
}
</pre></td></tr></table></figure>

<p><em>or</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>Shell 格式：
<span class="keyword">for</span>((a=<span class="number">1</span>;a&lt;<span class="number">5</span>;a++))
<span class="keyword">do</span>
	<span class="built_in">echo</span> <span class="string">"<span class="variable">$a</span>"</span>
<span class="keyword">done</span>
</pre></td></tr></table></figure>

<hr>
<p><strong>重定向</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>for(()){

} &gt; /output.txt

<span class="code">-----
or
-----</span>
for(())
do
done | sort
</pre></td></tr></table></figure>

<p>${!#} 返回命令行的脚本名</p>
<p>$*    保存单个单词</p>
<p>$@  保存，类似数组</p>
<hr>
<p><strong>getopt</strong></p>
<p>处理命令行选项和参数</p>
<figure class="highlight `"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash</span>
`<span class="keyword">set</span> --   getopt -q ab:c <span class="string">"<span class="variable">$@</span>"</span>` `
<span class="keyword">while</span> [ -n <span class="variable">$1</span> ]
<span class="keyword">do</span>
	<span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span>
    	<span class="operator">-a</span>) <span class="built_in">echo</span> <span class="string">"Found the -a option"</span> ;;
        -b) param=<span class="string">"<span class="variable">$2</span>"</span>
        	  <span class="built_in">echo</span> <span class="string">"Found the -b option.with parameter value <span class="variable">$param</span>"</span>
              shift;;
        -c)
        	<span class="built_in">echo</span> <span class="string">"Found the -c option"</span> ;;
        --) shift
        	<span class="keyword">break</span>;;
         *) <span class="built_in">echo</span> <span class="string">"<span class="variable">$1</span> is not an option"</span> ;;
shift
<span class="keyword">done</span>
</pre></td></tr></table></figure>

<h5 id="-getopts-"><strong>getopts</strong></h5>
<p><del>page284</del></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash</span>
<span class="comment">#</span>
<span class="keyword">while</span> <span class="built_in">getopts</span> <span class="string">":ab:cd"</span> opt 
<span class="keyword">do</span>
<span class="keyword">case</span> <span class="string">"<span class="variable">$opt</span>"</span> <span class="keyword">in</span>
        a) <span class="built_in">echo</span> <span class="string">"Option \"a\""</span>;;
        b) <span class="built_in">echo</span> <span class="string">"Option \"b\" "</span><span class="variable">$OPTARG</span><span class="string">""</span>;;
        c) <span class="built_in">echo</span> <span class="string">"Option \"c\""</span>;;
        d) <span class="built_in">echo</span> <span class="string">"Option \"d\""</span>;;
        <span class="keyword">esac</span>
<span class="keyword">done</span>
<span class="keyword">exit</span> <span class="number">0</span>
```language
</pre></td></tr></table></figure>

<hr>
<p><strong>永久重定向</strong></p>
<p>--在脚本中添加下行</p>
<p><code>exec 1&gt;outfile</code></p>
<p>所有正常输出将重定向至outfile中。</p>
<p><code>exec 2&gt;outfile</code></p>
<p>错误输出</p>
<h6 id="-shell-9-">在Shell中最多可以有9个打开的文件描述符</h6>
<p>创建自定义文件描述符（3-8）</p>
<p>比如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash</span>
<span class="keyword">exec</span> <span class="number">3</span>&gt;outfile3.out
<span class="comment">#exec 3&gt;&gt;outfile3.out</span>
<span class="comment">#顾名思义是追加</span>
<span class="built_in">echo</span> <span class="string">"输出正常"</span> &gt;&<span class="number">3</span>
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash
</span>
<span class="keyword">exec</span> <span class="number">6</span>&lt;&<span class="number">0</span>
<span class="keyword">exec</span> <span class="number">0</span>&lt; testfile

count=<span class="number">1</span>
<span class="keyword">while</span> <span class="built_in">read</span> line
<span class="keyword">do</span>
        <span class="built_in">echo</span> <span class="string">"Line #<span class="variable">$count</span>: <span class="variable">$line</span>"</span>
        ((count++))
<span class="keyword">done</span>

<span class="keyword">exec</span> <span class="number">0</span>&lt;&<span class="number">6</span>

<span class="built_in">read</span> <span class="operator">-s</span> -p  <span class="string">"Are you done now?"</span> answer
<span class="keyword">case</span> <span class="variable">$answer</span> <span class="keyword">in</span>
        y|y)
                <span class="built_in">echo</span> <span class="string">"Goodbye"</span>
        ;;
        N|n)
                <span class="built_in">echo</span> <span class="string">"sorry. this is the end."</span>
        ;;
        *)
                <span class="built_in">echo</span> <span class="string">"Doesn't Matter"</span>
        ;;
<span class="keyword">esac</span>
</pre></td></tr></table></figure>

<p>关闭文件描述符</p>
<p><code>exec 3&gt;&amp;-</code></p>
<p><code>mktemp -t test.XXXXXX</code></p>
<p>在/tmp目录下创建临时文件</p>
<p><code>mktemp -d dir.XXXXXX</code></p>
<hr>
<p>捕捉信号：</p>
<p>trap command SIGINT SIGTERM</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>1) SIGHUP	2) SIGINT	3) SIGQUIT	4) SIGILL	5) SIGTRAP
6) SIGABRT	7) SIGBUS	8) SIGFPE	9) SIGKILL	10) SIGUSR1
11) SIGSEGV	12) SIGUSR2	13) SIGPIPE	14) SIGALRM	15) SIGTERM
16) SIGSTKFLT	17) SIGCHLD	18) SIGCONT	19) SIGSTOP	20) SIGTSTP
21) SIGTTIN	22) SIGTTOU	23) SIGURG	24) SIGXCPU	25) SIGXFSZ
26) SIGVTALRM	27) SIGPROF	28) SIGWINCH	29) SIGIO	30) SIGPWR
31) SIGSYS	34) SIGRTMIN	35) SIGRTMIN+1	36) SIGRTMIN+2	37) SIGRTMIN+3
38) SIGRTMIN+4	39) SIGRTMIN+5	40) SIGRTMIN+6	41) SIGRTMIN+7	42) SIGRTMIN+8
43) SIGRTMIN+9	44) SIGRTMIN+10	45) SIGRTMIN+11	46) SIGRTMIN+12	47) SIGRTMIN+13
48) SIGRTMIN+14	49) SIGRTMIN+15	50) SIGRTMAX-14	51) SIGRTMAX-13	52) SIGRTMAX-12
53) SIGRTMAX-11	54) SIGRTMAX-10	55) SIGRTMAX-9	56) SIGRTMAX-8	57) SIGRTMAX-7
58) SIGRTMAX-6	59) SIGRTMAX-5	60) SIGRTMAX-4	61) SIGRTMAX-3	62) SIGRTMAX-2
63) SIGRTMAX-1	64) SIGRTMAX
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="shebang">#!/bin/bash</span>
trap <span class="string">"echo 'ByeBye'"</span> EXIT

<span class="keyword">for</span>((a=<span class="number">1</span>;a&lt;<span class="number">10</span>;a++)){
	<span class="built_in">echo</span> <span class="string">"Line <span class="variable">$a</span>"</span>
    sleep <span class="number">1</span>
}
trap - EXIT
<span class="built_in">echo</span> <span class="string">"移除退出信号"</span>
</pre></td></tr></table></figure>

<p><strong>crontab</strong></p>
<p>每月最后一天</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="keyword">if</span> [ `<span class="built_in">date</span> +%d -d tomorrow` = <span class="number">01</span> ]; <span class="keyword">then</span>
	<span class="command"><span class="keyword">command</span></span>
fi
</pre></td></tr></table></figure>

<p><code>00 12 * * * if [ `date +%d -d tomorrow` = 01 ];then : command</code></p>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<div class="meta">
          
<div class="date">

<time datetime="2014-01-20T09:25:41.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  1月 20 2014
</time>





</div>

          

 
 <div class="tags">
   <a href="/tags/VMware/">VMware</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/vcap510/" itemprop="url">
            VCAP510</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>VDCA510考试</p>
<pre><code>未知总是很可怕的，特此记录下来。
</code></pre><blockquote>
<p>关于VDCA510考试， 总的来说题目很简答，全部来自<a href="http://www.virtuallanger.com/vcap-dca-5/" target="_blank">VCAP-DCA指南</a>。 只是改改题型而已。要求是必须熟练，熟练，因为考试时间有限
这里记录我考试相关的一些题目相关。</p>
</blockquote>
<p>服务方面，</p>
<blockquote>
<ol>
<li>创建用户和组（ESXi和vMA）。创建多个用户和组，对用户赋予shell访问权限。将用户加到相应的组，其二就是角色控制。其中一个赋予普通用户，另一个则赋予管理原权限。</li>
<li>配置syslog日志服务器，查看相应的文件中是否生成相应的文件。</li>
<li>FT配置，要求某磁盘能开启FT，网络配置，开启FT  logging。</li>
<li>应用主机配置文件，对配置文件做修改以达到兼容主机配置。比如配置SNMP。   </li>
<li>集群方面的题目，要么是让某些虚拟机在重启的时候不启动、要么是不应有DRS规则、要么是确保某个特定的虚拟机都不应有相应的规则等，还有其他，如，存储swapfile配置、接入访问控制等。</li>
<li>排错题，要求将StorageVM存储中的ISO文件拷贝到NFS中，但NFS却连不上。</li>
<li>开启Update Manager插件，配置更新计划调度。   </li>
<li>AutoDeploy有3-5道题目，创建image配置文件，导出ISO文件，基于配置文件的自动部署等 </li>
<li>基于模板创建VM进行排错。</li>
<li>根据性能分析，将Chart结果保存到配置中，或对相应的虚拟机进行调整，如资源池。 </li>
<li>证书相关，将证书拷贝到主机。</li>
</ol>
</blockquote>
<p>安全方面，</p>
<blockquote>
<p>配置防火墙，比如将某端口对外开放或者对内的，如3000端口。</p>
</blockquote>
<p>存储方面，</p>
<blockquote>
<ol>
<li>添加存储集群，配置存储DRS，将特定存储进行维护，检查配置是否正确。</li>
<li>当然存储配置文件就不说了，很简单。</li>
<li>添加SATP、PSA相应的规则，并激活。</li>
</ol>
</blockquote>
<p>脚本方面，</p>
<blockquote>
<ol>
<li>powershell的改编题。要求你对ps1脚本进行排错。记得是查看所有VM光驱状态的脚本。</li>
<li>在AutoDeploy中有体现。</li>
</ol>
</blockquote>
<p>网络方面，</p>
<blockquote>
<ol>
<li>配置分布式交换机，将特定的标准交换机迁移至DVS中，创建相应的端口组，对端口组做负载均衡相关配置。</li>
<li>配置NetFlow对特定端口组进行监控。</li>
<li>配置Pvlan，要求VLAN20中的机器能访问Internet却不能互访。但是VLAN100中的机器不光可以上Internet也可以访问VLAN20</li>
<li>标准交换机上的配置，为交换机添加上行链路，此交换机专门用来配置FT，然后检查虚拟机开始FT是否正常。</li>
</ol>
</blockquote>
<hr>
<p>将<a href="http://www.virtuallanger.com/vcap-dca-5/" target="_blank">VCAP-DCA指南</a>的实验完全掌握、熟练之后，VDCA510的考试就一点都不难了。</p>

          
        </div>


</article>




</div>

<nav id="pagenavi">
    
    
        <a href="/page/2/" class="next">
          下一頁
        </a>
    
    <div class="center">
      <a href="archives">Blog Archives</a>
    </div>
</nav>
</div>
	</div>
        <footer id="footer" class="inner">
          Copyright © 2013 - 獨菰、瑉 - Powered by <a href="https://github.com/tommy351/hexo">Hexo</a><br>
- Ported theme <a href="https://github.com/nuklly/hexo-theme-greyshade">GreyShade</a> -
        </footer>
        
<script src="/js/slash.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




      </div><!-- mid-col -->
    </div><!-- container -->
</body>
</html>
